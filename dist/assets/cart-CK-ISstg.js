const a="sevenstitches_cart";class n{static items=[];static load(){const t=localStorage.getItem(a);if(t)try{this.items=JSON.parse(t)}catch(i){console.error("Failed to parse cart storage",i),this.items=[]}}static save(){localStorage.setItem(a,JSON.stringify(this.items)),window.dispatchEvent(new Event("cart-updated"))}static getItems(){return this.items.length===0&&this.load(),this.items}static addItem(t,i=1){this.items.length===0&&this.load();const s=this.items.find(e=>e.id===t.id);s?s.quantity+=i:this.items.push({...t,quantity:i}),this.save()}static removeItem(t){this.items.length===0&&this.load(),this.items=this.items.filter(i=>i.id!==t),this.save()}static updateQuantity(t,i){this.items.length===0&&this.load();const s=this.items.find(e=>e.id===t);s&&(s.quantity=i,s.quantity<=0?this.removeItem(t):this.save())}static getTotal(){return this.items.length===0&&this.load(),this.items.reduce((t,i)=>t+i.price*i.quantity,0)}static getCount(){return this.items.length===0&&this.load(),this.items.reduce((t,i)=>t+i.quantity,0)}static clear(){this.items=[],this.save()}}export{n as C};
